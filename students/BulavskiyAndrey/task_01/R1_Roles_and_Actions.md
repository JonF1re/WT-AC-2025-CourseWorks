# Вариант 33 — Органайзер группы «Без лишних чатов» — Роли и действия

Краткое описание:

- Тема: Органайзер учебной/рабочей группы с объявлениями, файлами, календарём, опросами и чатами.
- MVP‑сущности: `Announcement`, `File`, `Event` (календарь), `Poll`, `Choice`, `Vote`, `Message`, `User`.
- Основное требование приёмки (MVP): **права доступа** — кто что может создавать, редактировать, читать.
- Бонусы: расширенные роли, дайджест, документация API, тесты, Kubernetes, CI.

---

## 1. Роли в системе

Минимальный набор ролей для MVP:

- **Администратор группы (Admin / Owner)**  
  Владелец или куратор группы. Настраивает права, управляет участниками и ключевыми сущностями.

- **Модератор (Moderator)**  
  Помогает администратору вести группу: публикует объявления, управляет событиями и опросами, следит за чатами.

- **Участник (Member / Student / Employee)**  
  Обычный участник группы: получает объявления, материалы, участвует в опросах и событиях, пишет в чатах.

Бонусные/дополнительные роли (необязательно для MVP, но можно предусмотреть в модели):

- **Гость (Guest / Read‑only)**  
  Может просматривать часть контента (например, расписание и общие объявления), но не может публиковать сообщения и создавать сущности.

- **Системный администратор (SystemAdmin)**  
  Управление несколькими группами/организациями (вне рамок одной конкретной группы).

В R1 достаточно фокусироваться на **Admin**, **Moderator**, **Member** (и опционально **Guest**).

---

## 2. Действия по сущностям

Ниже — перечень основных действий, которые важны для проектирования матрицы прав.

### 2.1. Объявления (`Announcement`)

- **Администратор**
  - Создать объявление (для всей группы или части участников).
  - Редактировать/удалять любые объявления.
  - Закреплять важные объявления.
  - Планировать отложенную публикацию (бонус).

- **Модератор**
  - Создавать объявления.
  - Редактировать/удалять свои объявления.
  - Опционально — редактировать объявления других модераторов (настройка).

- **Участник**
  - Просматривать опубликованные объявления.
  - Отмечать объявления как прочитанные (бонус).

- **Гость (опционально)**
  - Просматривать только общедоступные объявления (если включено админом).

### 2.2. Файлы (`File`)

- **Администратор**
  - Загружать файлы в библиотеку группы.
  - Удалять/переименовывать любые файлы.
  - Назначать категории и права доступа (кто видит).

- **Модератор**
  - Загружать файлы (в рамках разрешённых категорий).
  - Редактировать/удалять свои файлы.

- **Участник**
  - Скачивать/просматривать доступные файлы.
  - (Опционально) загружать файлы в определённые пространства (например, для домашних заданий, проектов).

- **Гость**
  - Просматривать только общедоступные материалы (если включено).

### 2.3. Календарь (`Event`)

- **Администратор**
  - Создавать/редактировать/удалять события в календаре.
  - Настраивать типы событий (лекция, дедлайн, экзамен и т. п.).

- **Модератор**
  - Создавать и изменять события для своей группы.
  - Переназначать даты/время (в рамках политики группы).

- **Участник**
  - Просматривать календарь и детали событий.
  - (Бонус) Помечать своё участие/статус (пойду/не пойду/под вопросом).

- **Гость**
  - Просмотр только части событий (например, публичных лекций).

### 2.4. Опросы (`Poll`, `Choice`, `Vote`)

- **Администратор**
  - Создавать опросы для группы.
  - Просматривать результаты опросов (в том числе анонимных, в агрегированном виде).
  - Закрывать/переоткрывать опрос.

- **Модератор**
  - Создавать опросы (например, по организационным вопросам).
  - Просматривать результаты в рамках своей группы.

- **Участник**
  - Просматривать и проходить опросы, в которых он имеет право участвовать.
  - Видеть результаты (если это не запрещено настройками опроса).

### 2.5. Чаты (`Message`, `Chat`/`Thread`)

(Сущность `Chat` может быть формально частью доменной модели, хотя в требованиях явно дан только `Message`.)

- **Администратор**
  - Создавать/удалять чаты (общие, подгрупповые, тематические).
  - Ограничивать возможность отправки сообщений (только админ/модераторы/анонсы).
  - Удалять сообщения (модерация).

- **Модератор**
  - Удалять сообщения, которые нарушают правила.
  - Закрывать обсуждения (read‑only).

- **Участник**
  - Отправлять сообщения в чаты, к которым имеет доступ.
  - Редактировать/удалять свои сообщения в течение ограниченного времени (по политике).

- **Гость**
  - Только чтение, либо без доступа к чатам (по умолчанию).

### 2.6. Пользователи (`User`) и роли

- **Администратор**
  - Добавлять/удалять участников группы.
  - Назначать и менять роли (`admin`, `moderator`, `member`, `guest`).
  - Блокировать/разблокировать участников.

- **Модератор**
  - (Опционально) Отмечать участников как «проблемных», инициировать запрос администратору на ограничение доступа.

- **Участник**
  - Редактировать свой профиль (имя, аватар, контакты).

---

## 3. Системные действия и дайджест (бонус)

### 3.1. Системные действия

- Отправка уведомлений:
  - push/внутренние уведомления о новых объявлениях, событиях, опросах, сообщениях.
- Планировщик:
  - запуск периодических задач (генерация дайджеста, напоминания о событиях, закрытие опросов).

Для R1 можно описать эти действия на уровне сценариев и API; реальная реализация фоновых задач — опционально.

### 3.2. Дайджест

- Сбор за период:
  - новые важные объявления;
  - ближайшие события;
  - закрывшиеся или важные опросы;
  - новые/обновлённые файлы.
- Формирование дайджеста:
  - краткий список с ссылками на сущности;
  - возможно — разбиение по категориям (объявления / дедлайны / материалы).
- Доставка (каналы):
  - внутренняя лента (специальная страница «Дайджест»);
  - e‑mail (бонус);
  - интеграция с внешними мессенджерами (out of scope для MVP).

---

## 4. Приёмка по ролям (MVP)

Для успешной приёмки R1 по правам доступа должны быть чётко описаны:

- Какие роли есть в системе и как они назначаются.
- Какие действия с сущностями (`Announcement`, `File`, `Event`, `Poll`, `Message`, `User`) каждая роль может выполнять.
- Какие ограничения действуют:
  - участник видит только свою группу;
  - участник не может удалять чужие сообщения/объявления/файлы;
  - модератор не может менять права администраторов;
  - гость не может писать в чаты и создавать сущности.

Детальная формализация прав — в файле `R1_Matrix_of_Rights.md`.
