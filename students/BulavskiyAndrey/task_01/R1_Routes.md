# Вариант 33 — Органайзер группы «Без лишних чатов» — Маршруты (user flows)

Тема: органайзер учебной/рабочей группы с объявлениями, файлами, календарём, опросами и чатами.  
MVP: объявления, файлы, календарь, опросы, чаты.  
API: `/announcements`, `/files`, `/calendar`, `/polls`, `/chats`.  
Данные: `Announcement`, `File`, `Event`, `Poll`, `Choice`, `Vote`, `Message`, `User`.

---

## 1. Идентификация (вход в систему)

- Гость:
  - Открывает главную страницу → видит описания групп/минимальную информацию (по ссылке‑приглашению) → переходит к регистрации/входу.
- Участник (Member):
  - Логин → попадает на дашборд группы: свежие объявления, ближайшие события календаря, активные опросы.
- Модератор:
  - Логин → дашборд модератора: новые сообщения для модерации (если включено), черновики объявлений, жалобы на сообщения/контент (бонус).
- Администратор (Owner/Админ группы или системный админ):
  - Логин → админ‑панель группы: управление участниками, правами, настройками группы, шаблонами дайджеста.

---

## 2. Подготовка группы (Администратор)

1. Создание/настройка группы:
   - Создать группу или подключиться к существующей (в рамках системы курсовых можно считать, что группа уже есть).
   - Заполнить название, описание, тип (учебная/рабочая), аватар/лого (опционально).
2. Управление участниками:
   - Пригласить участников по ссылке/коду или по email.
   - Назначить роли: `admin`, `moderator`, `member` (бонус: `guest` только для чтения).
3. Настройка модулей:
   - Включить/выключить: объявления, файлы, календарь, опросы, чаты.
   - Настроить политики: кто может создавать объявления, кто может создавать события/опросы, кто может писать в общий чат.
4. Настройка дайджеста (бонус):
   - Периодичность: ежедневный / еженедельный.
   - Канал доставки: email / внутри приложения / мессенджер (out of scope для MVP).

---

## 3. Объявления (Announcements)

### 3.1. Создание объявления

Актор: Администратор или Модератор (опционально — староста/назначенный участник).

Шаги:
- Открыть раздел «Объявления».
- Нажать «Создать объявление».
- Заполнить:
  - заголовок,
  - текст,
  - прикреплённые файлы (по ссылке на `File`),
  - таргетинг (вся группа / подгруппа / конкретная роль),
  - время публикации (сейчас или отложенная отправка, бонус).
- Сохранить как черновик или опубликовать.

Результат:
- Появляется новое `Announcement` в списке.
- Участники получают уведомление (внутри системы; внешние каналы — бонус).

### 3.2. Просмотр ленты объявлений

Актор: Участник.

Шаги:
- Открыть раздел «Объявления» или дашборд.
- Увидеть список объявлений в хронологическом порядке (с фильтрами: по дате, типу, важности).
- Открыть карточку объявления → увидеть полный текст, список файлов, связанные события/опросы (если заданы).

Результат:
- Пользователь быстро находит важную информацию без поиска в длинных чатах.

---

## 4. Файлы (Files)

### 4.1. Загрузка файлов

Актор: Администратор, Модератор, при необходимости — Участник (если разрешено политикой).

Шаги:
- Открыть раздел «Файлы».
- Нажать «Загрузить».
- Выбрать файлы с диска.
- Указать:
  - название/описание,
  - категорию (лекции, задания, отчёты, методички и т. д.),
  - привязку: к объявлению, событию или просто в общую библиотеку.
- Подтвердить загрузку.

Результат:
- Создаётся сущность `File`, появляется запись в библиотеке файлов.

### 4.2. Просмотр и скачивание файлов

Актор: Участник.

Шаги:
- Открыть раздел «Файлы» или зайти через объявление/событие/чат.
- Отфильтровать файлы по категории, дате, типу.
- Нажать на файл для скачивания или открытия предпросмотра (если тип поддерживается).

Результат:
- Участник быстро находит нужный материал без пролистывания истории чатов.

---

## 5. Календарь (Events)

### 5.1. Создание события

Актор: Администратор, Модератор (опционально — назначенные участники).

Шаги:
- Открыть раздел «Календарь».
- Нажать «Создать событие».
- Заполнить:
  - название,
  - описание,
  - дата/время начала и окончания,
  - место (онлайн‑ссылка/аудитория),
  - тип (лекция, дедлайн, встреча, экзамен, митинг и т. п.),
  - напоминания (бонус).
- Сохранить событие.

Результат:
- В календаре появляется `Event`, участники видят его на дашборде и в календарном виде.

### 5.2. Просмотр календаря

Актор: Участник.

Шаги:
- Открыть раздел «Календарь».
- Переключать виды: список, неделя, месяц.
- Фильтровать по типу событий (дедлайны, лекции, экзамены и т. д.).
- Открыть карточку события → увидеть детали и связанные материалы (файлы, объявления, опрос).

Результат:
- Понятное расписание группы с дедлайнами без хаоса в чатах.

---

## 6. Опросы (Polls)

### 6.1. Создание опроса

Актор: Администратор или Модератор (возможен режим: участник создаёт опрос только в определённых каналах/подгруппах).

Шаги:
- Открыть раздел «Опросы» или кнопку «Создать опрос» из чата/объявления.
- Задать:
  - вопрос,
  - варианты ответов (`Choice`),
  - возможность множественного выбора,
  - анонимность голосования (да/нет),
  - дату/время окончания.
- Привязать к событию/объявлению/чату (опционально).
- Опубликовать опрос.

Результат:
- Создаётся `Poll` с набором `Choice`, задействуется механизм `Vote`.

### 6.2. Участие в опросе

Актор: Участник.

Шаги:
- Открыть опрос из раздела «Опросы», дашборда, объявления или из чата.
- Выбрать вариант(ы) ответа.
- Нажать «Проголосовать».

Результат:
- Создаётся запись `Vote`, пользователь не может голосовать повторно (или может менять голос до дедлайна — по настройкам).

### 6.3. Просмотр результатов опроса

Актор: Участник (или только админ/модератор при закрытом режиме).

Шаги:
- Открыть карточку опроса.
- Видеть распределение голосов (в процентах/количестве).

Результат:
- Группа быстро принимает решения (выбор времени встречи, формата зачёта и т. д.).

---

## 7. Чаты (Chats & Messages)

### 7.1. Общий чат группы

Актор: Участник.

Шаги:
- Открыть раздел «Чаты».
- Выбрать «Общий чат группы».
- Писать сообщения (`Message`), прикреплять файлы/ссылки, реагировать эмодзи (бонус).

Результат:
- Обычное живое общение, но при этом вся важная информация вынесена в объявления/календарь/файлы.

### 7.2. Тематические / подгрупповые чаты

Актор: Администратор или Модератор.

Шаги:
- Создать новый чат:
  - название (например, «Проект по курсовой», «Подгруппа 1»),
  - участники,
  - права (кто может писать/кто только читает).
- Пригласить участников.

Результат:
- Общение разбито по контекстам, меньше шума в общем чате.

---

## 8. Дайджест (бонус)

### 8.1. Генерация дайджеста

Актор: Система по расписанию (cron‑задача) или Администратор вручную.

Шаги:
- Собрать за период:
  - новые объявления,
  - ближайшие события,
  - закрывшиеся/активные опросы,
  - важные файлы, добавленные за период.
- Сформировать краткий дайджест (список с ссылками).
- Отправить в:
  - e‑mail (бонус),
  - личные сообщения в приложении,
  - закреплённый пост/объявление.

Результат:
- Участники видят всё важное в одном месте, даже если пропустили активность в чате.

---

## 9. Приёмка (MVP) — ключевые сценарии

Минимальный набор, который должен работать в R1:

- Авторизация участника и попадание на дашборд группы.
- Создание и просмотр объявлений.
- Загрузка и просмотр файлов.
- Создание и просмотр событий календаря.
- Создание и прохождение опросов с фиксацией голосов.
- Общий чат группы.
- Базовые права: админ/модератор/участник (см. отдельные файлы про роли и матрицу прав).
